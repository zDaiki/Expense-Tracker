<div class="dashboard-container">
  <div class="dashboard-header">
    <h1>Dashboard</h1>
    <button class="btn-add" (click)="addNewExpense()">Add New Expense</button>
  </div>

  <div class="dashboard-summary">
    <div class="summary-card">
      <h2>Total Expenses</h2>
      <p class="amount">Rs. {{ totalAmount }}</p>
    </div>

    <div class="summary-card">
      <h2>Number of Expenses</h2>
      <p class="count">{{ allExpenses.length }}</p>
    </div>

    <div class="summary-card">
      <h2>Catagories</h2>
      <p class="count">{{ categories.length }}</p>
    </div>
  </div>

  <div class="expense-insights">
    <div class="insight-card">
      <h3>Top Category</h3>
      <div class="insight-content" *ngIf="topCategory">
        <!-- <div class="category-icon">
          <mat-icon>{{ getCategoryIcon(topCategory.name) }}</mat-icon>
        </div> -->
        <div class="category-details">
          <p class="category-amount">Rs. {{ topCategory.amount }}</p>
          <p class="category-name">{{ topCategory.name }}</p>
          <p class="category-percent">{{ topCategory.percentage | number:'1.0-0' }}% of total</p>
        </div>
      </div>
    </div>
    
    <div class="insight-card">
      <h3>Largest Expense</h3>
      <div class="insight-content" *ngIf="largestExpense">
        <p class="expense-amount">Rs. {{ largestExpense.amount }}</p>
        <p class="expense-description">{{ largestExpense.description }}</p>
        <p class="expense-date">{{ largestExpense.date | date }}</p>
      </div>
    </div>
    
    <div class="insight-card">
      <h3>Recent Activity</h3>
      <div class="insight-content">
        <p class="activity-amount">Total: Rs. {{ recentActivityAmount }}</p>
        <p class="activity-stat">{{ recentActivityCount }} expenses in the last 7 days</p>
      </div>
    </div>
  </div>

  <div class="analytics-section">
    <div class="chart-container">
      <h2>Monthly Spending</h2>
      <canvas id="monthlyChart"></canvas>
    </div>
    
    <div class="chart-container">
      <h2>Spending by Category</h2>
      <canvas id="categoryChart"></canvas>
    </div>
    
    <div class="chart-container full-width">
      <h2>Expense Trend</h2>
      <canvas id="trendChart"></canvas>
    </div>
  </div>

  

  <div class="recent-expenses">
    <div class="section-header">
      <h2>Recent Expenses</h2>
      <a routerLink="/expenses" class="view-all">View All</a>
    </div>

    <div class="expense-list">
      <div *ngIf="recentExpenses.length === 0" class="no-expenses">
        <p>No expenses found. Add your first expense to get started!</p>
      </div>

      <div *ngFor="let expense of recentExpenses" class="expense-item">
        <div class="expense-details">
          <h3>{{ expense.description }}</h3>
          <p class="expense-category">{{ expense.category }}</p>
          <p class="expense-date">{{ expense.date | date }}</p>
        </div>
        <p class="expense-amount">Rs. {{ expense.amount }}</p>
      </div>
    </div>
  </div>
</div>
